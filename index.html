<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visitor Information</title>
    <style>
      body {
        font-family: sans-serif;
        line-height: 1.6;
      }
      #info div {
        margin-bottom: 8px;
        word-wrap: break-word;
      }
      strong {
        display: inline-block;
        min-width: 150px;
      }
    </style>
  </head>
  <body>
    <h1>Visitor Information</h1>
    <div id="info">Loading...</div>

    <script>
      async function getVisitorInfo() {
        const infoDiv = document.getElementById("info");
        let infoHTML = "";
        let ipAddress = "Could not fetch IP"; // Default value

        // --- Fetch IP Address (Requires an external service) ---
        try {
          // Using api.ipify.org as an example public IP service
          const response = await fetch("https://api.ipify.org?format=json");
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const data = await response.json();
          ipAddress = data.ip;
        } catch (error) {
          console.error("Error fetching IP address:", error);
          ipAddress = `Error fetching IP: ${error.message}`;
        }

        // --- Gather Browser Information ---
        const ua = navigator.userAgent;
        const screenWidth = screen.width;
        const screenHeight = screen.height;
        const colorDepth = screen.colorDepth;
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;
        const language = navigator.language || navigator.userLanguage;
        const platform = navigator.platform;
        const cookiesEnabled = navigator.cookieEnabled;
        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
        const onlineStatus = navigator.onLine;

        // --- Basic Device Type Inference (Example - very basic!) ---
        let deviceType = "Desktop";
        if (/Mobi|Android/i.test(ua)) {
          deviceType = "Mobile";
        } else if (/Tablet|iPad/i.test(ua)) {
          deviceType = "Tablet";
        } else if (
          platform.startsWith("Mac") ||
          platform.startsWith("Win") ||
          platform.startsWith("Linux")
        ) {
          // Could still be a tablet/hybrid, but more likely desktop
          deviceType = "Desktop";
        }
        // More robust detection often involves checking touch capabilities
        // and screen size in addition to the user agent.

        // --- Display Information ---
        infoHTML += `<div><strong>IP Address:</strong> ${ipAddress}</div>`;
        infoHTML += `<div><strong>User Agent:</strong> ${ua}</div>`;
        infoHTML += `<div><strong>Inferred Device Type:</strong> ${deviceType} (based on UA/Platform)</div>`;
        infoHTML += `<div><strong>Screen Resolution:</strong> ${screenWidth}x${screenHeight}</div>`;
        infoHTML += `<div><strong>Color Depth:</strong> ${colorDepth}-bit</div>`;
        infoHTML += `<div><strong>Browser Window Size:</strong> ${windowWidth}x${windowHeight}</div>`;
        infoHTML += `<div><strong>Language:</strong> ${language}</div>`;
        infoHTML += `<div><strong>Platform:</strong> ${platform}</div>`;
        infoHTML += `<div><strong>Timezone:</strong> ${timezone}</div>`;
        infoHTML += `<div><strong>Cookies Enabled:</strong> ${cookiesEnabled}</div>`;
        infoHTML += `<div><strong>Online Status:</strong> ${onlineStatus}</div>`;

        infoDiv.innerHTML = infoHTML;
      }

      // Run the function when the page loads
      window.addEventListener("load", getVisitorInfo);
    </script>
  </body>
</html>
